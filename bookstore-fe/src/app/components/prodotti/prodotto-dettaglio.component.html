<div class="container mt-4">
  <!-- Messaggio di errore -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Messaggio di successo -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Caricamento...</span>
    </div>
  </div>

  <!-- Dettaglio prodotto -->
  <div *ngIf="!loading && prodotto" class="row">
    <div class="col-md-5">
      <img 
        *ngIf="prodotto.nomeFile" 
        [src]="'http://localhost:8080/images/' + prodotto.nomeFile" 
        class="img-fluid rounded" 
        [alt]="prodotto.titolo">
      <img 
        *ngIf="!prodotto.nomeFile" 
        src="assets/images/no-image.png" 
        class="img-fluid rounded" 
        alt="Immagine non disponibile">
    </div>
    <div class="col-md-7">
      <h1>{{ prodotto.titolo }}</h1>
      <h5 class="text-muted">{{ prodotto.sottotitolo }}</h5>
      
      <div class="my-4">
        <h3 class="d-inline">€ {{ prodotto.prezzo.toFixed(2) }}</h3>
        <span class="text-muted ml-2">*IVA esclusa ({{ prodotto.aliquota }}%)</span>
      </div>
      
      <div class="my-4">
        <p>{{ prodotto.descrizione }}</p>
      </div>
      
      <div class="d-flex align-items-center my-4">
        <label for="quantita" class="me-3">Quantità:</label>
        <input 
          type="number" 
          id="quantita" 
          class="form-control" 
          style="width: 80px;" 
          [(ngModel)]="quantita" 
          min="1" 
          max="100">
      </div>
      
      <button 
        class="btn btn-primary btn-lg" 
        (click)="aggiungiAlCarrello()">
        <i class="bi bi-cart-plus"></i> Aggiungi al carrello
      </button>
      
      <a routerLink="/prodotti" class="btn btn-outline-secondary ms-2">
        Torna all'elenco prodotti
      </a>
    </div>
  </div>

  <!-- Prodotto non trovato -->
  <div *ngIf="!loading && !prodotto" class="text-center mt-5">
    <p>Prodotto non trovato.</p>
    <a routerLink="/prodotti" class="btn btn-primary">Torna all'elenco prodotti</a>
  </div>
</div>
